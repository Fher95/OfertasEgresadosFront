<h2>EDITAR EVENTO</h2>
<mat-dialog-content>
  <form #addEventForm="ngForm" invalidate (ngSubmit)="onSave(addEventForm)">
    <div class="form-row">
      <mat-form-field class="form-group col-md-9">
        <input
          type="text"
          name="nombre"
          [(ngModel)]="evento.nombre"
          matInput
          #nombre="ngModel"
          required
          placeholder="Nombre"
        />
        <mat-error
          *ngIf="
            nombre.invalid && nombre.touched && nombre.hasError('required')
          "
        >
          El nombre del evento es requerido
        </mat-error>
      </mat-form-field>
      <mat-form-field class="form-group col-md-3">
        <input
          type="number"
          name="cupos"
          [(ngModel)]="evento.cupos"
          matInput
          #cupos="ngModel"
          placeholder="Cupos"
          min="0"
        />
        <!-- <mat-error
              *ngIf="
                cupos.invalid && cupos.touched && cupos.hasError('required')
              "
            >
              La cantidad de cupos del evento es requerida
            </mat-error> -->
        <mat-error
          *ngIf="cupos.invalid && cupos.touched && cupos.hasError('min')"
        >
          La cantidad de cupos debe ser mayor a cero
        </mat-error>
      </mat-form-field>
    </div>
    <div class="form-row">
      <mat-form-field class="form-group col-md-6">
        <input
          matInput
          [matDatepicker]="fechaInicioPicker"
          placeholder="Fecha de inicio"
          [(ngModel)]="evento.fechaInicio"
          #fechaInicio="ngModel"
          required
          name="fehcaInicio"
        />
        <mat-datepicker-toggle
          matSuffix
          [for]="fechaInicioPicker"
        ></mat-datepicker-toggle>
        <mat-datepicker #fechaInicioPicker></mat-datepicker>
        <mat-error
          *ngIf="
            fechaInicio.invalid &&
            fechaInicio.touched &&
            fechaInicio.hasError('required')
          "
        >
          Debe seleccionar una fecha de inicio
        </mat-error>
      </mat-form-field>
      <mat-form-field class="form-group col-md-6">
        <input
          matInput
          [matDatepicker]="fechaFinPicker"
          placeholder="Fecha de finalización"
          [(ngModel)]="evento.fechaFin"
          #fechaFin="ngModel"
          required
          name="fechaFin"
        />
        <mat-datepicker-toggle
          matSuffix
          [for]="fechaFinPicker"
        ></mat-datepicker-toggle>
        <mat-datepicker #fechaFinPicker></mat-datepicker>
        <mat-error
          *ngIf="
            fechaFin.invalid &&
            fechaFin.touched &&
            fechaFin.hasError('required')
          "
        >
          Debe seleccionar una fecha de finalización
        </mat-error>
      </mat-form-field>
    </div>
    <div class="form-row">
      <mat-form-field class="col-md-12 form-group">
        <input
          type="text"
          matInput
          placeholder="Lugar"
          [(ngModel)]="evento.lugar"
          #lugar="ngModel"
          name="lugar"
          required
        />
        <mat-error
          *ngIf="lugar.invalid && lugar.touched && lugar.hasError('required')"
        >
          El lugar de realización del evento es requerido
        </mat-error>
      </mat-form-field>
    </div>
    <div class="form-row">
      <mat-form-field class="form-group col-md-12">
        <textarea
          matInput
          name="descripcion"
          [(ngModel)]="evento.descripcion"
          #descripcion="ngModel"
          rows="3"
          placeholder="Descripción"
          required
        ></textarea>
        <mat-error
          *ngIf="
            descripcion.invalid &&
            descripcion.touched &&
            descripcion.hasError('required')
          "
        >
          La descripción de evento es requerida
        </mat-error>
      </mat-form-field>
    </div>
    <div class="form-row">
      <mat-form-field class="form-group col-md-12">
        <textarea
          matInput
          placeholder="Dirigido a"
          name="dirigido"
          #dirigido="ngModel"
          [(ngModel)]="evento.dirigidoA"
          rows="3"
          required
        ></textarea>
        <mat-error
          *ngIf="
            dirigido.invalid &&
            dirigido.touched &&
            dirigido.hasError('required')
          "
        >
          Debe ingresar a quien(es) va dirigido el evento
        </mat-error>
      </mat-form-field>
    </div>
    <div class="form-row">
      <app-egr-file-upload 
        [text]="'Abrir imagen'"
        [accept]="'.jpg, .png'"
        (importEvent)="importFile($event)"
      ></app-egr-file-upload>
    </div>
    <div class="form-row">
      <img
        src="{{ evento.imagePath }}"
        alt="Imagen del evento"
        class="image-thumbnail"
      />
    </div>
    <mat-dialog-actions>
      <button
        type="button"
        mat-raised-button
        class="btn btn-danger"
        (click)="cancelar()"
      >
        Cancelar
      </button>
      <button
        [disabled]="addEventForm.invalid"
        type="submit"
        mat-raised-button
        color="primary"
      >
        Guardar
      </button>
    </mat-dialog-actions>
  </form>
</mat-dialog-content>
